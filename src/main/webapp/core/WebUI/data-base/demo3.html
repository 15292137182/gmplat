<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../Public/publicjs.js"></script>
</head>
<body>
    <div id="box">
        <el-row style="margin: 20px 0;">
            <el-col :span="3">
                <el-button type="info" @click="addBlock">新增表单测试</el-button>
            </el-col>
            <el-col :span="3">
                <el-button type="info" @click="editBlock">编辑表单测试</el-button>
            </el-col>
            <el-col :span="3">
                <el-button type="info" @click="testTable">新增表格测试</el-button>
            </el-col>
        </el-row>
    </div>
    <div>
        <el-col :span="24" >
            <div class="allBorder">
                <el-row>
                    <el-col>
                        <div class="bg-color"><span>动态表格</span></div>
                    </el-col>
                </el-row>
                <el-row class="inputStyle" id="searchDemo">
                    <el-col :xs="10" :sm="10" :md="10">
                        <div>
                            <components :is="searchBlock" :search-input="searchs"></components>
                        </div>
                    </el-col>
                </el-row>
                <el-row id="dataSetConfig" style="padding:0 10px 10px 10px">
                    <components :is="gmpTable" :table-data="tables"></components>
                </el-row>
            </div>
        </el-col>
    </div>

</body>
<script>
    var vm = new Vue({
        el:"#box",
        data:{
            divIndex:'',
            divIndex1:'',
            edit:''
        },
        methods:{
            addBlock(){
                this.divIndex = gmpPopup.dynamicDiv('demo2.html','新增表单测试','400px', '500px',function(){
                    vm.edit = false;
                })
            },
            editBlock(){
                this.divIndex1 = gmpPopup.dynamicDiv('demo2.html','编辑表单测试','400px', '500px',function(){
                    vm.edit = true;
                    // 加载数据
                    var _json = {
                        代码: "zxc",
                        名称: "asdd",
                        内容: "qwer",
                        说明: "fghj"
                    }
                    GmpForm.formTable.loadData(_json);
                })
            },
            testTable() {
                this.divIndex = gmpPopup.dynamicDiv("table.html", "表格测试", "1000px", "400px", function() {
                    var tableData = [{
                        代码: "test001",
                        内容: "数据1",
                        名称: "测试001",
                        所属模块: "测试模块1",
                        类型: "测试",
                        说明: "加载数据取出数据"
                    }, {
                        代码: "test002",
                        内容: "数据2",
                        名称: "测试002",
                        所属模块: "测试模块2",
                        类型: "测试",
                        说明: "加载数据取出数据"
                    }, {
                        代码: "test003",
                        内容: "数据3",
                        名称: "测试003",
                        所属模块: "测试模块3",
                        类型: "测试",
                        说明: "加载数据取出数据"
                    }, {
                        代码: "test004",
                        内容: "数据4",
                        名称: "测试004",
                        所属模块: "测试模块4",
                        类型: "测试",
                        说明: "加载数据取出数据"
                    }];
                    GmpTable.tables.loadRecord(tableData);
                });
            }
        }
    })
    var arr=[{widthSetting:'',funcType:'search',ename:'search'}];
    var sObj = new GmpSearchBlock("searchs","codeId",arr,"#searchDemo");
    sObj.bulidComponent();
    var arrs = [
        {displayTitle:'代码',funcType:'grid',displayWidget:'tableCell',ename:'code'},
        {displayTitle:'名称',funcType:'grid',displayWidget:'tableCell',ename:'name'},
        {displayTitle:'类型',funcType:'grid',displayWidget:'tableCell',ename:'typeName'},
        {displayTitle:'内容',funcType:'grid',displayWidget:'tableCell',ename:'content'},
        {displayTitle:'所属模块',funcType:'grid',displayWidget:'tableCell',ename:'block'},
        {displayTitle:'所属系统',funcType:'grid',displayWidget:'tableCell',ename:'syso'},
        {displayTitle:'说明',funcType:'grid',displayWidget:'tableCell',ename:'desp'},
        {displayTitle:'版本',funcType:'grid',displayWidget:'tableCell',ename:'version'},
    ];
    var tObj = new GmpTableBlock("tables","codeId",arrs,"#dataSetConfig","www.baidu.com",{rowId:"123"},"www.baidu.com",{"onClickRow":function(row){
        console.log("执行单击行-----------------");
        console.log(row);
    },
        onEditRow:function(){
            console.log("执行编辑行----------------");
        },
        onDeleteRow:function(){
            console.log("执行删除-------------");
        }
    });
    tObj.bulidComponent();
//    tObj.reload();
    tObj.loadRecord([{code:"1"},{code:"2"}]);//给数据加载表格数据
    tObj.clear();//清空
    tObj.loadRecord([{code:"1"}]);//给数据加载表格数据
</script>
</html>