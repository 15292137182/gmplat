<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>获取服务端options</title>
</head>
<body>
    <div id="app">
        <el-row>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <single-selection @change-data="getData" :initial="initial_1">
                    <!---->
                </single-selection>
            </el-col>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <single-selection :initial="initial" ref="cascader">
                    <!---->
                </single-selection>
            </el-col>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <single-selection :initial="initial_3">
                    <!---->
                </single-selection>
            </el-col>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <single-selection :initial="initial_2">
                    <!---->
                </single-selection>
            </el-col>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <single-selection @change-data="getData_1" ref="multiple" :initial="initial_4"></single-selection>
            </el-col>
            <el-col :span="6" :offset="9" style="margin-top: 20px;">
                <el-button type="info" @click="getMultiple">获取</el-button>
            </el-col>
        </el-row>
    </div>

    <script type="text/javascript" src="../Public/publicjs.js"></script>
    <script type="text/javascript" src="../Public/gmpComponent.js"></script>
    <script>
        var vm = new Vue({
            el: "#app",
            data() {
                return {
                    // 数据库表查询: 查询接口  默认值  是否禁用
                    initial: {
                        url: "",
                        key: '',
                        value: [],
                        disabled: "false"
                    },
                    // 键值集合设置参数: 参数(键值集合)  key-set配置  默认值  是否禁用
                    initial_1: {
                        params: "functionBlockAlign",
                        value: "",
                        disabled: "false"
                    },
                    initial_2: {
                        params: "functionBlockType",
                        value: "",
                        disabled: "false"
                    },
                    // 查询数据库表
                    initial_3: {
                        url: serverPath + '/keySet/queryPage',
                        key: '{"label":"keysetName","value":"rowId"}',
                        value: [],
                        disabled: "false"
                    },
                    initial_4: {
                        url: serverPath + '/keySet/queryPage',
                        key: '{"label":"keysetName","value":"rowId"}',
                        value: [],
                        disabled: "false",
                        multiple: "true"
                    }
                }
            },
            created() {
//                this.change();
            },
            methods: {
                change() {
                    this.initial_3.value = "23ae8e2c-fbef-477e-8d9a-6d46d5b1";
                    this.initial_4.value = ["23ae8e2c-fbef-477e-8d9a-6d46d5b1", "f2c376f2-7097-42b3-ad65-0ec197ad"];
                },
                getData(data) {
                    // 级联选择方法
                    if (data.value == "center") {
//                        this.$refs.cascader.cascaderEvent("search");
                        this.$refs.cascader.setUrl({
                            url: serverPath + '/dbTableColumn/queryTabById?rowId=5243fc43-a9c6-42f0-a0c8-fd74e7fb',
                            key: '{"label":"columnEname","value":"rowId"}'
                        });
                        this.$refs.cascader.setDisabled(true);
                    }
                    if(JSON.stringify(data) === "{}") {
                        this.$refs.cascader.setValue("");
                    }
                },
                getData_1(data) {
                    console.log(data);
//                    vm.initial_4.value = data;
                    this.$refs.multiple.setValue('["23ae8e2c-fbef-477e-8d9a-6d46d5b1", "f2c376f2-7097-42b3-ad65-0ec197ad"]')
                },
                getMultiple() {
                    console.log(vm.initial_4.value);
                }
            }
        })
    </script>
</body>
</html>