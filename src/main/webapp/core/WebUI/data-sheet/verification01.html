<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../Public/publicjs.js"></script>
    <style>
        .el-form-item__error{
            /*display:none;*/
        }
    </style>


</head>
<body>
<div id="app">
    <el-form :model="ruleForm2" :rules="rules2" ref="ruleForm2" label-width="100px" class="demo-ruleForm">

        <el-form-item label="活动名称" prop="name">
            <el-input v-model="ruleForm2.name"></el-input>
        </el-form-item>

        <el-form-item label="活动区域" prop="region">
            <el-select v-model="ruleForm2.region" placeholder="请选择活动区域">
                <el-option label="区域一" value="shanghai"></el-option>
                <el-option label="区域二" value="beijing"></el-option>
            </el-select>
        </el-form-item>

        <el-form-item label="活动时间">
            <el-form-item prop="date">
                <el-date-picker type="date" placeholder="选择日期" v-model="ruleForm2.date" style="width: 100%;"></el-date-picker>
            </el-form-item>
        </el-form-item>
        <el-form-item label="活动性质" prop="type">
            <el-checkbox-group v-model="ruleForm2.type">
                <el-checkbox label="美食/餐厅线上活动" name="type"></el-checkbox>
                <el-checkbox label="地推活动" name="type"></el-checkbox>
                <el-checkbox label="线下主题活动" name="type"></el-checkbox>
                <el-checkbox label="单纯品牌曝光" name="type"></el-checkbox>
            </el-checkbox-group>
        </el-form-item>

        <el-form-item label="特殊资源" prop="resource">
            <el-radio-group v-model="ruleForm2.resource">
                <el-radio label="线上品牌商赞助"></el-radio>
                <el-radio label="线下场地免费"></el-radio>
            </el-radio-group>
        </el-form-item>
        <el-form-item>
            <el-button type="primary" @click="submitForm('ruleForm2')">提交</el-button>
            <el-button @click="resetForm('ruleForm2')">重置</el-button>
        </el-form-item>
    </el-form>
</div>
<script>
   var vm=new Vue({
       el:'#app',
       data() {
           var checkDate = function(rule, value, callback){
               if (!value) {
                   return callback(new Error('日期不能为空'));
               }else{
                   callback();
               }

           };
           var validateName = function(rule, value, callback){
               if (value === '') {
                      callback(new Error(rule.message));
               }else{
                   callback();
               }
           };
           var validateDate = function(rule, value, callback){
               if (value === '') {
                   callback(new Error(rule.message));
               }else{
                   callback();
               }
           };
           var checkType=function(rule, value, callback) {
               if (value.length === 0) {
                   callback(new Error(rule.message));
               }else{
                   callback();
               }
           };
           var checkResource=function(rule, value, callback) {
               console.log(callback);
               if (value==='') {
                   callback(new Error(rule.message));
               }else{
                   callback();
               }
           };
           return {
               ruleForm2: {
                   name: '',
                   region: '',
                   date: '',
                   type:[],
                   resource:'',
               },
               rules2: {
                   name: [
                       { validator: validateName, trigger: 'blur' ,message:'请输入活动名称'}
                   ],
                   region: [
                       { validator: validateDate, trigger: 'change',message:'请选择活动区域' }
                   ],
                   date: [
                       { validator: checkDate, trigger: 'blur',message:'请选择活动事件'}
                   ],
                   type: [
                       { validator: checkType, trigger: 'change',message:'请至少选择一个活动性质' }
                   ],
                   resource: [
                       { validator: checkResource, trigger: 'change',message:'请选择一种资源' }
                   ]
               }
           };
       },
       methods: {
           submitForm(formName) {
               this.$refs[formName].validate(function(valid){
                   console.log(valid);
                   if (valid) {
                       alert('submit!');
                   } else {
                       $('.el-form-item__error').fadeIn();;
                       vm.judgeMent();

                   }
               });

           },
           resetForm(formName) {
               this.$refs[formName].resetFields();
           },
           judgeMent(){
               setTimeout(function () {
                    $('.el-form-item__error').fadeOut();
               }, 2000)
           }

       }
   })

</script>
</body>
</html>