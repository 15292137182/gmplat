<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Event_Add</title>
    <script src="../Public/publicjs.js"></script>
    <style>
        #connectTable .el-row {
            margin-top: 20px;
        }

        .el-table__body tr.current-row > td {
            background: #50bfff;
        }

        .el-table th {
            text-align: center;
            background-color: white;
        }

        .el-table__header-wrapper thead div {
            background-color: white;
        }
    </style>
</head>
<body>
<el-row id="objPropertiesTable" style="padding:0 10px 10px 10px">
    <el-col :span="24">
        <template>
            <el-table :data="objectPropertiesData" highlight-current-row @current-change="handleCurrentChange" border style="width: 100%;border-radius: 5px;margin-top:10px">
                <el-table-column prop="propertyCode" label="属性代码" width="">
                </el-table-column>
                <el-table-column prop="propertyName" label="属性名称" width="">
                </el-table-column>
            </el-table>
        </template>
    </el-col>
    <el-col style="margin-top:100px">
        <el-col :span="11" style="text-align:right">
            <el-button type="primary" @click.native="conformEvent">确定</el-button>
        </el-col>
        <el-col :span="11" style="text-align: left" :offset="2">
            <el-button type="primary" @click.native="cancel">取消</el-button>
        </el-col>
    </el-col>
</el-row>
</body>
<script>
    var em = new Vue({
        el: '#objPropertiesTable',
        data: {
            objectPropertiesData: []
        },
        created() {
            this.$http.jsonp(serverPath + "/businObjPro/query", {
                rowId:window.parent.em.relateBusiObjId
            }, {
                jsonp: 'callback'
            }).then(function (res) {
                if(res.data.data!=null){
                    this.objectPropertiesData = res.data.data;
                }
            });
        },
        methods: {
            handleCurrentChange(val) {
                //选中行的数据
                this.currentRow = val.propertyCode + "(" + val.propertyName + ")";
                //选中行的ID
                this.currentId = val.rowId;
            },
            conformEvent() {
                //将数据渲染到外面的input里面
                window.parent.em.tableInput = this.currentRow;
                window.parent.em.dataId = this.currentId;
                //执行关闭
                parent.layer.close(window.parent.littledivIndex);
            },
            cancel() {
                parent.layer.close(window.parent.littledivIndex)
            }
        }
    })
</script>
</html>