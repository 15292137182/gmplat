/**
 * Created by andim on 2017/8/9.
 */
var addDataSet = new Vue({
    el:'#addDataSet',
    data:{
        datasetCode:'',//代码
        nameInput:'',//名称
        typeInput:'',//类型
        content:'',//内容
        desp:'',//说明
        version:'',//版本
        isEdit:'',//是否编辑
        addUrl:serverPath+'/dataSetConfig/add',//新增
        editUrl:serverPath+'/dataSetConfig/modify',//编辑
    },
    methods:{
        conformEvent(){//确定
            if(!this.isEdit){//新增
                this.$http.jsonp(this.addUrl,{
                    datasetName:this.nameInput,
                    datasetType:this.typeInput,
                    datasetContent:this.content,
                    desp:this.desp
                },{
                    jsonp:'callback'
                }).then(function(res){
                    ibcpLayer.ShowOK(res.data.message);
                    if(res.data.state==1){
                        ibcpLayer.Close(dataSetConfigButton.divIndex);
                        dataSetConfig.searchResTable();
                    }
                },function(){
                    alert("新增失败")
                })
            }else{//编辑
                this.$http.jsonp(this.editUrl,{
                    rowId:dataSetConfig.rowObjId,
                    datasetName:this.nameInput,
                    datasetType:this.typeInput,
                    datasetContent:this.content,
                    desp:this.desp
                },{
                    jsonp:'callback'
                }).then(function(res){
                    ibcpLayer.ShowOK(res.data.message);
                    if(res.data.state==1){
                        ibcpLayer.Close(dataSetConfigButton.divIndex);
                        dataSetConfig.searchResTable();
                    }
                },function(){
                    alert("新增失败")
                })
            }
        },
        cancel(){//取消
            ibcpLayer.Close(dataSetConfigButton.divIndex);
        }
    }
})