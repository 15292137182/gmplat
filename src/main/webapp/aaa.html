<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery.js"></script>
    <script src="jquery.form.js"></script>
</head>
<body>
<button id="AA">aa</button>
<button id="BB">bb</button>
<input type="file" id="myfile" onchange="oc(this)"/>

<h1>hello</h1>

<form id="fileUpload" action="http://192.168.100.50/gmplat/gmp/sys/core/excel/excelUpload" enctype="multipart/form-data"
      method="post">
    <input id="excelFile" name="file" type="file"/>
    <input type="button" value="提交" onclick="submitExcel()"/>
</form>

<br/>

<form id="form2" action="http://192.168.100.50/gmplat/gmp/sys/core/excel/excelUpload" method="post" enctype="multipart/form-data">
    <input type="file" class="file1" name="file1"/>
    <button type="submit" class="but1">上传1</button>
</form>

</body>

</html>
<script>


        $("#AA").click(function () {
            console.log(111);
            window.open("http://192.168.100.50/gmplat/gmp/sys/core/excel/exportModule?suffix=xls", "_self")
        });

        /** 验证文件是否导入成功  */
        $("#fileUpload").ajaxForm(function (data) {
            console.log(data);
            if (data == "1") {
                alert("提交成功！");
            }
        });



    //    $(function(){
    //        /** 验证文件是否导入成功  */
    //        $("#fileUpload").ajaxForm(function(data){
    //            if(data=="1"){
    //                alert("提交成功！");
    //            }
    //        });
    //    });


//    $(document).ready(function () {
//        $("#fileUpload").ajaxForm(function (data) {
//            alert("post success." + data);
//            //Alert("post success.");
//        });
//    });


    $("#BB").click(function () {
        var str = [];
        str.push("6281ff7c-d1a6-4b4d-a4de-71179641");
        $.ajax({
            url: 'http://192.168.100.50/gmplat/gmp/sys/core/menu/queryById',
            type: 'post',
            data: {rowId: str},
            dataType: 'json',
            success: function (result) {
                console.log(result)
            },
            error: function () {
                alert("提示错误");
            }
        });
    });

    $("#CC").click(function () {
        $.ajax({
            url: 'http://192.168.100.50/gmplat/gmp/sys/core/excel/excelUpload',
            type: 'post',
            dataType: 'json',
            contentType: 'multipart/form-data',
            success: function (result) {
                console.log(result)
            },
            error: function () {
                alert("提示错误");
            }
        });
    });


    function oc(obj) {
        var aa = $("#myfile").val();
        alert(aa);
    }


    function submitExcel() {

        var excelFile = $("#excelFile").val();
        if (excelFile == '') {
            alert("请选择需上传的文件!");
            return false;
        }
//        if (excelFile.indexOf('.xls') == -1) {
//            alert("文件格式不正确，请选择正确的Excel文件(后缀名.xls)！");
//            return false;
//        }
        $("#fileUpload").submit();


    }




        //alert(getRootPath());
</script>
