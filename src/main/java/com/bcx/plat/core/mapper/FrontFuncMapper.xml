<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bcx.plat.core.mapper.FrontFuncMapper">
  <select id="select" resultType="com.bcx.plat.core.entity.FrontFunc" parameterType="hashMap">
    SELECT
    tc.row_id,tc.func_code,tc.func_name,tc.func_type,
    tc.relate_busi_obj,tc.wether_available,tc.desp,
    tc."status",tc.version, tc.create_user, tc.create_user_name, tc.create_time,tc.modify_user,
    tc.modify_user_name, tc.modify_time, tc.delete_user, tc.delete_user_name, tc.delete_time,
    tc.delete_flag,
    tt.object_code,tt.object_name
    FROM t_front_func as tc LEFT JOIN t_business_object as tt ON tc.relate_busi_obj=tt.row_id
    <where>
      <if test="strArr!=null and strArr.size()!=0">
        AND
        <foreach collection="strArr" item="str" index="index" separator="or" open="(" close=")">
          func_code like '%${str}%' or func_name like '%${str}%' or func_type like '%${str}%'
        </foreach>
      </if>
      <if test="rowId!=null and rowId.length()!=0">
        AND tc.row_id = #{rowId}
      </if>
    </where>
    order by create_time DESC
  </select>


  <insert id="insert" parameterType="com.bcx.plat.core.entity.FrontFunc">
    INSERT INTO t_front_func
    (
    row_id, func_code, func_name, func_type,
    relate_busi_obj, wether_available, desp,
    <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_select"/>
    ) VALUES
    (
    #{rowId},#{funcCode},#{funcName},#{funcType},
    #{relateBusiObj},#{wetherAvailable},#{desp},
    <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_insert"/>
    )
  </insert>

  <update id="update" parameterType="com.bcx.plat.core.entity.FrontFunc">
    UPDATE public.t_front_func
    SET
    func_code = #{funcCode},
    func_name = #{funcName},
    func_type = #{funcType},
    relate_busi_obj = #{relateBusiObj},
    wether_available = #{wetherAvailable},
    desp = #{desp},
    modify_user = #{modifyUser},
    modify_user_name = #{modifyUserName},
    modify_time= #{modifyTime}
    WHERE row_id = #{rowId}
  </update>

  <delete id="delete" parameterType="String">
    DELETE FROM t_front_func WHERE row_id = #{rowId}
  </delete>
</mapper>