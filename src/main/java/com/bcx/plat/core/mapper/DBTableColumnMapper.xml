<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bcx.plat.core.mapper.DBTableColumnMapper">

    <select id="select" resultType="com.bcx.plat.core.entity.DBTableColumn" parameterType="hashmap">
        SELECT
        row_id
        ,relate_table_row_id
        ,column_ename
        ,column_cname
        ,desp
        ,
        <include refid="com.bcx.plat.core.base.BaseMapper.common_columns"/>
        FROM public.t_db_table_column
        <where>
            <if test="strArr != null and strArr.size() != 0">
                AND
                <foreach collection="strArr" close=")" index="index" item="item" open="(" separator="OR">
                    (column_ename like '%${item}%' OR column_cname like '%${item}%' OR desp like '%${item}%')
                </foreach>
            </if>
            <if test="rowId != null and rowId != ''">
                AND row_id = #{rowId}
            </if>
        </where>
    </select>

    <insert id="insert" parameterType="com.bcx.plat.core.entity.DBTableColumn">
        INSERT INTO public.t_db_table_column
        (
        row_id, relate_table_row_id, column_ename, column_cname, desp,
        <include refid="com.bcx.plat.core.base.BaseMapper.common_columns"/>
        )VALUE (
        #{rowId},#{relateTableRowId},#{columnEname},#{columnCname},#{desp},
        <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_#"/>
        )
    </insert>
</mapper>