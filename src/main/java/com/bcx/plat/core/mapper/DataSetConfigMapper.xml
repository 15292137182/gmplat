<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bcx.plat.core.mapper.DataSetConfigMapper">
    <select id="select" resultType="com.bcx.plat.core.entity.DataSetConfig" parameterType="hashMap">
        SELECT row_id,dataset_code,dataset_name,dataset_type,dataset_content,desp,
        <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_select"/>
        FROM  t_dataset_config
        <where>
            <if test="strArr!=null and strArr.size()!=0">
                <foreach collection="strArr" separator="or" item="item" index="index" open="(" close=")">
                    dataset_code like '%${item}%' or dataset_name like '%${item}%'
                </foreach>
            </if>
            <if test="rowId!=null and rowId.length()!=0">
                AND row_id=#{rowId}
            </if>
        </where>
        order by create_time desc
    </select>

    <insert id="insert" parameterType="com.bcx.plat.core.entity.DataSetConfig">
        INSERT INTO t_dataset_config
        (
        row_id,dataset_code,dataset_name,dataset_type,dataset_content,desp,
        <include refid ="com.bcx.plat.core.base.BaseMapper.common_columns_select"/>
        )
        VALUES
        (
        #{rowId},#{dataSetCode},#{dataSetName},#{dataSetType},#{dataSetContent},#{desp},
        <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_insert"/>
        )
    </insert>

    <update id="update" parameterType="com.bcx.plat.core.entity.DataSetConfig">
        UPDATE t_dataset_config
        SET
            dataset_code = #{dataSetCode},
            dataset_name = #{dataSetName},
            dataset_type = #{dataset_type},
            dataset_content = #{dataSetContent},
            desp = #{desp},
            modify_user = #{modifyUser},
            modify_user_name = #{modifyUserName},
            modify_time = #{modifyTime}
        WHERE row_id = #{rowId}
    </update>

    <delete id="delete" parameterType="String">
        DELETE FROM
            t_dataset_config
        WHERE
            row_id = #{rowId}
    </delete>
</mapper>