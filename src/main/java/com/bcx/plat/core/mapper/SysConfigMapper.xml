<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bcx.plat.core.mapper.SysConfigMapper">
    <select id="select" resultType="com.bcx.plat.core.entity.SysConfig" parameterType="hashMap">
        select
            row_id,conf_key,conf_value,desp,
            <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_select"/>
        FROM
            t_sys_config
        <where>
            <if test="strArr!=null and strArr.size()!=0">
                <foreach collection="strArr" item="item" index="index" open="(" separator="or" close=")">
                    conf_key like '%${item}%' or conf_value like '%${item}%'
                </foreach>
            </if>
            <if test="rowId!=null and rowId.length()!=0">
               and row_id = #{rowId}
            </if>
        </where>
        ORDER BY create_time desc
    </select>

    <insert id="insert" parameterType="com.bcx.plat.core.entity.SysConfig">
        INSERT  INTO
            t_sys_config
            (
                row_id, conf_key,conf_value,desp,
                <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_select"/>
            )
        VALUES
            (
                #{rowId},#{confKey},#{confValue},#{desp},
                <include refid="com.bcx.plat.core.base.BaseMapper.common_columns_insert"/>
            )
    </insert>
    <update id="update" parameterType="com.bcx.plat.core.entity.SysConfig">
        UPDATE
            t_sys_config
        SET
            conf_key = #{confKey},
            conf_value = #{confValue},
            desp = #{desp},
            modify_user = #{modifyUser},
            modify_user_name = #{modifyUserName},
            modify_time = #{modifyTime}
    </update>

    <delete id="delete" parameterType="string">
        delete FROM t_sys_config WHERE row_id = #{rowId}
    </delete>
</mapper>